(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11,626],{1244:function(e,t,n){Promise.resolve().then(n.bind(n,6720))},6720:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(7437),r=n(2265);n(1854);var o=n(4033),s=n(2545),l=n(3198),i=n(3956),u=n(6485);function c(e){let{mode:t}=e,n=(0,i.C)(e=>e.authReducer.value.token),c=(0,l.I0)(),[d,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),f=(0,o.useRouter)(),[v,m]=(0,r.useState)(""),[y,S]=(0,r.useState)(null),[x,k]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=async()=>{await c((0,u.qb)()),j(!0)};e()},[c]),(0,r.useEffect)(()=>{n&&b&&f.push("/")},[n,b,f]);let w=async e=>{e.preventDefault(),S(null),k(null);try{p(!0);let e=await fetch("login"===t?"".concat("https://password-gen-backend.onrender.com","/api/auth/login"):"".concat("https://password-gen-backend.onrender.com","/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:v})}),n=await e.json();if(!e.ok)throw p(!1),Error(n.error||"Something went wrong");if(console.log(n),n.error){p(!1),S(n.error);return}"login"===t&&n.token&&!y?(c((0,u.x4)(n.token)),f.push("/")):"register"===t&&k(n.message||"Registration successful! Please check your email to verify your account and log in.")}catch(e){S(e.message)}};return(0,a.jsx)(a.Fragment,{children:g||!b||n?(0,a.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,a.jsx)(s.iT,{visible:!0,height:"80",width:"80",color:"#4fa94d",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})}):(0,a.jsx)("div",{style:{height:"100vh"},className:"d-flex align-items-center justify-content-center flex-column gap-4 mb-3",children:(0,a.jsxs)("form",{onSubmit:w,className:"auth-form d-flex align-items-center justify-content-center flex-column gap-4 mb-3",children:[(0,a.jsx)("h1",{children:"login"===t?"Login":"Register"}),(0,a.jsx)("input",{className:"input",type:"email",placeholder:"Email",value:d,onChange:e=>h(e.target.value),required:!0}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:v,onChange:e=>m(e.target.value),required:!0}),x&&(0,a.jsx)("p",{className:"text-success",children:x}),y&&(0,a.jsx)("p",{style:{color:"red"},children:y}),(0,a.jsx)("button",{className:"btn btn-lg btn-primary",type:"submit",children:"login"===t?"Login":"Register"}),(0,a.jsx)("p",{children:"login"===t?(0,a.jsxs)(a.Fragment,{children:["Dont have an account yet? ",(0,a.jsx)("a",{href:"/register",children:"Register"})]}):(0,a.jsxs)(a.Fragment,{children:["Already have an account? ",(0,a.jsx)("a",{href:"/login",children:"Login"})]})})]})})})}},6485:function(e,t,n){"use strict";n.d(t,{kS:function(){return l},qb:function(){return r},x4:function(){return s}});var a=n(64);let r=(0,a.hg)("auth/loadTokenFromStorage",async()=>localStorage.getItem("token")),o=(0,a.oM)({name:"auth",initialState:{value:{token:null}},reducers:{login:(e,t)=>{e.value.token=t.payload,localStorage.setItem("token",t.payload)},logout:e=>{e.value.token=null,localStorage.removeItem("token")}},extraReducers:e=>{e.addCase(r.fulfilled,(e,t)=>{e.value.token=t.payload})}}),{login:s,logout:l}=o.actions;t.ZP=o.reducer},7328:function(e,t,n){"use strict";n.d(t,{AS:function(){return s},H4:function(){return u},Zv:function(){return l},ag:function(){return i}});var a=n(64);let r=(0,a.oM)({name:"password",initialState:{value:{length:0,isSwitched:void 0,isUppercase:void 0,isNumbers:void 0,isSymbols:void 0,result:"",isSavingToHistory:!1,strengthCheckerInputValue:""}},reducers:{changeStrengthCheckerValue:(e,t)=>{e.value.strengthCheckerInputValue=t.payload},setSavingDone:e=>{e.value.isSavingToHistory=!1},setResult:(e,t)=>{e.value.result=t.payload},setSavingToHistory:(e,t)=>{e.value.isSavingToHistory=t.payload},createPassword:(e,t)=>{e.value.isSavingToHistory=!0,e.value.length=t.payload,e.value.result=(()=>{let n="",a="abcdefghijklmnopqrstuvwxyz".concat(e.value.isUppercase?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"").concat(e.value.isSymbols?"!@#$%^&*()<>,.?/[]{}-=_+|/":"").concat(e.value.isNumbers?"0123456789":"","\n        ");for(;n.length<t.payload;)n+=a[Math.floor(Math.random()*a.replaceAll(/\s/g,"").length)];return n})()}}}),{createPassword:o,setSavingDone:s,changeStrengthCheckerValue:l,setResult:i,setSavingToHistory:u}=r.actions;t.ZP=r.reducer},3956:function(e,t,n){"use strict";n.d(t,{C:function(){return i},h:function(){return l}});var a=n(64),r=n(7328),o=n(6485),s=n(3198);let l=(0,a.xC)({reducer:{passwordReducer:r.ZP,authReducer:o.ZP}}),i=s.v9},1854:function(){}},function(e){e.O(0,[571,713,662,971,596,744],function(){return e(e.s=1244)}),_N_E=e.O()}]);