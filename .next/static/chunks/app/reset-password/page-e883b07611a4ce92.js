(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{7647:function(e,t,a){Promise.resolve().then(a.bind(a,3064))},3064:function(e,t,a){"use strict";a.r(t);var n=a(7437),r=a(6485),s=a(3956),o=a(4033);a(1854);var l=a(2265),u=a(2545),i=a(3198);t.default=()=>{(0,s.C)(e=>e.authReducer.value.token);let[e,t]=(0,l.useState)(!1),[a,c]=(0,l.useState)(""),[d,h]=(0,l.useState)(""),[p,g]=(0,l.useState)(null),[f,v]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),S=(0,i.I0)(),w=(0,o.useRouter)(),x=(0,o.useSearchParams)();(0,l.useEffect)(()=>{let e=async()=>{await S((0,r.qb)()),t(!0)};e()},[S]);let b=async e=>{if(e.preventDefault(),v(null),d!==a){v("Passwords doesn't match");return}try{y(!0);let e=await fetch("".concat("https://password-gen-backend.onrender.com","/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:a,token:x.get("token")})}),t=await e.json();if(!e.ok)throw y(!1),Error(t.error||"Something went wrong");if(console.log(t),t.error){y(!1),v(t.error);return}g("Password successfully changed. You can now log in"),setTimeout(()=>w.push("/login"),4e3)}catch(e){v(e.message)}finally{y(!1)}};return(0,n.jsx)(n.Fragment,{children:e?(0,n.jsx)("div",{style:{height:"100vh"},className:"d-flex align-items-center justify-content-center flex-column gap-4 mb-3",children:(0,n.jsxs)("form",{onSubmit:b,className:"auth-form d-flex align-items-center justify-content-center flex-column gap-4 mb-3",children:[(0,n.jsx)("h1",{children:"Reset password"}),(0,n.jsx)("input",{className:"input",type:"password",placeholder:"Enter password",value:a,onChange:e=>c(e.target.value),required:!0}),(0,n.jsx)("input",{type:"password",placeholder:"Confirm password",value:d,onChange:e=>h(e.target.value),required:!0}),p?(0,n.jsx)("p",{className:"text-success text-center",children:p}):"",f?(0,n.jsx)("p",{className:"text-danger text-center",children:f}):"",(0,n.jsx)("button",{className:"btn btn-lg btn-primary",type:"submit",children:"Submit"})]})}):(0,n.jsxs)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:[(0,n.jsx)(u.iT,{visible:!0,height:"80",width:"80",color:"#4fa94d",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})," "]})})}},6485:function(e,t,a){"use strict";a.d(t,{kS:function(){return l},qb:function(){return r},x4:function(){return o}});var n=a(64);let r=(0,n.hg)("auth/loadTokenFromStorage",async()=>localStorage.getItem("token")),s=(0,n.oM)({name:"auth",initialState:{value:{token:null}},reducers:{login:(e,t)=>{e.value.token=t.payload,localStorage.setItem("token",t.payload)},logout:e=>{e.value.token=null,localStorage.removeItem("token")}},extraReducers:e=>{e.addCase(r.fulfilled,(e,t)=>{e.value.token=t.payload})}}),{login:o,logout:l}=s.actions;t.ZP=s.reducer},7328:function(e,t,a){"use strict";a.d(t,{AS:function(){return o},H4:function(){return i},Zv:function(){return l},ag:function(){return u}});var n=a(64);let r=(0,n.oM)({name:"password",initialState:{value:{length:0,isSwitched:void 0,isUppercase:void 0,isNumbers:void 0,isSymbols:void 0,result:"",isSavingToHistory:!1,strengthCheckerInputValue:""}},reducers:{changeStrengthCheckerValue:(e,t)=>{e.value.strengthCheckerInputValue=t.payload},setSavingDone:e=>{e.value.isSavingToHistory=!1},setResult:(e,t)=>{e.value.result=t.payload},setSavingToHistory:(e,t)=>{e.value.isSavingToHistory=t.payload},createPassword:(e,t)=>{e.value.isSavingToHistory=!0,e.value.length=t.payload,e.value.result=(()=>{let a="",n="abcdefghijklmnopqrstuvwxyz".concat(e.value.isUppercase?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"").concat(e.value.isSymbols?"!@#$%^&*()<>,.?/[]{}-=_+|/":"").concat(e.value.isNumbers?"0123456789":"","\n        ");for(;a.length<t.payload;)a+=n[Math.floor(Math.random()*n.replaceAll(/\s/g,"").length)];return a})()}}}),{createPassword:s,setSavingDone:o,changeStrengthCheckerValue:l,setResult:u,setSavingToHistory:i}=r.actions;t.ZP=r.reducer},3956:function(e,t,a){"use strict";a.d(t,{C:function(){return u},h:function(){return l}});var n=a(64),r=a(7328),s=a(6485),o=a(3198);let l=(0,n.xC)({reducer:{passwordReducer:r.ZP,authReducer:s.ZP}}),u=o.v9},1854:function(){},4033:function(e,t,a){e.exports=a(8165)}},function(e){e.O(0,[571,713,802,971,596,744],function(){return e(e.s=7647)}),_N_E=e.O()}]);