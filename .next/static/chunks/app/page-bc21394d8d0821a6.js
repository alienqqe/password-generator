(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4605:function(e,t,a){Promise.resolve().then(a.bind(a,203))},203:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(7437),n=a(2265),r=a(3198),o=a(3956),l=a(3297),i=a(7328),c=a(6485),d=()=>{let[e,t]=(0,n.useState)(!1),[a,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(0),[p,m]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),[x,b]=(0,n.useState)(!1),y=(0,r.I0)();(0,n.useEffect)(()=>{y((0,c.qb)())},[y]);let j=(0,o.C)(e=>e.passwordReducer.value.result),k=(0,o.C)(e=>e.authReducer.value.token),N=async()=>{if(k)try{let e=await fetch("https://password-gen-backend-production.up.railway.app/api/settings/getSettings",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k)}});if(!e.ok)throw Error("Failed to read settings");let a=await e.json();m(a.data[0].isUpperCase),f(a.data[0].isNumbers),w(a.data[0].isSymbols),h(a.data[0].passwordLength),t(!0)}catch(e){console.error(e)}};(0,n.useEffect)(()=>{N()},[]),(0,n.useEffect)(()=>{x||N()},[x]),(0,n.useEffect)(()=>{if(e&&k){b(!0);try{fetch("https://password-gen-backend-production.up.railway.app/api/settings/set",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k)},body:JSON.stringify({isSymbols:v,isUpperCase:p,isNumbers:g,passwordLength:u})}).then(e=>{if(!e.ok)throw Error("Failed to save settings");return e.json()}).then(e=>{console.log("Password saved:",e)}).catch(e=>{console.error("POST error:",e)})}catch(e){console.error(e)}finally{b(!1)}}},[v,p,g,u,e]),(0,n.useEffect)(()=>{let e=new RegExp(/\s/g);if(a&&j&&""!==j.trim()&&(d(!0),y((0,i.H4)(!0)),k))try{fetch("https://password-gen-backend-production.up.railway.app/api/password/save",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k)},body:JSON.stringify({password:j.replaceAll(e,"")})}).then(e=>{if(!e.ok)throw Error("Failed to save password");return e.json()}).then(e=>{y((0,i.AS)()),console.log("Password saved:",e)}).catch(e=>{console.error("POST error:",e),y((0,i.AS)())})}catch(e){console.error("JWT decode error:",e),y((0,i.AS)())}},[j]);let S=async()=>{await navigator.clipboard.writeText(j),alert("Text copied")},C=new RegExp(/\s/g);return(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center flex-column flex-md-row main-container",children:(0,s.jsxs)("div",{className:"generator-container mt-5 shadow p-3 d-block rounded",children:[(0,s.jsx)("h4",{className:"pb-1 ms-3 ms-md-0",children:"Password Generator"}),(0,s.jsx)("div",{className:"result-container d-inline-block",children:(0,s.jsx)("input",{className:"d-inline-block ms-1",type:"text",value:null==j?void 0:j.replaceAll(C,"")})}),(0,s.jsx)("button",{className:"btn btn-dark clipboard-btn d-inline ms-2 ",onClick:S,children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard mb-md-1",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),(0,s.jsx)("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})]})}),(0,s.jsx)(l.Z,{password:j}),(0,s.jsxs)("div",{className:"settings w-100",children:[(0,s.jsx)("div",{className:"text-center"}),(0,s.jsxs)("div",{className:"setting d-flex justify-content-between align-items-center",children:[(0,s.jsx)("label",{className:"px-3",children:"Password length"}),(0,s.jsx)("input",{type:"number",value:u,onChange:e=>parseInt(e.target.value)>=1||!e.target.value?h(parseInt(e.target.value)):h(4),id:"length",min:"1",max:"20",className:"ms-3"})]}),(0,s.jsxs)("div",{className:"setting ",children:[(0,s.jsx)("label",{className:"px-3",children:"Include uppercase letters"}),(0,s.jsx)("input",{type:"checkbox",onClick:()=>m(!p),checked:p,id:"uppercase",className:"ms-3"})]}),(0,s.jsxs)("div",{className:"setting ",children:[(0,s.jsx)("label",{className:"px-3",children:"Include numbers"}),(0,s.jsx)("input",{type:"checkbox",onClick:()=>f(!g),checked:g,id:"uppercase",className:"ms-3"})]}),(0,s.jsxs)("div",{className:"setting ",children:[(0,s.jsx)("label",{className:"px-3",children:"Include special symbols"}),(0,s.jsx)("input",{type:"checkbox",onClick:()=>w(!v),checked:v,id:"uppercase",className:"ms-3"})]})]}),(0,s.jsx)("button",{className:"generate-button btn btn-outline-light btn-lg d-block w-100 text-center",disabled:!(u>=4)||!(u<=20),onClick:()=>{let e="",t="abcdefghijklmnopqrstuvwxyz".concat(p?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"").concat(v?"!@#$%^&*()<>,.?/[]{}-=_+|/":"").concat(g?"0123456789":"","\n        ");for(;e.length<u;)e+=t[Math.floor(Math.random()*t.replaceAll(/\s/g,"").length)];d(!0),y((0,i.ag)(e)),console.log(e)},children:"Generate"})]})})},u=e=>{let{userData:t}=e,a=(0,r.I0)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"text-center d-flex justify-content-between flex-row-reverse text-light shadow-sm p-3 mb-5 rounded",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-3",children:[(0,s.jsx)("h4",{className:"text-dark",children:null==t?void 0:t.email}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>{confirm("Are you sure you want to logout?")&&(a((0,i.ag)("")),a((0,c.kS)()))},children:"Logout"})]}),(0,s.jsx)("h1",{className:"mt-2 text-dark fs-1 d-none d-md-inline",children:"Password Generator"})]})})},h=a(4033),p=a(2545);class m extends Error{}m.prototype.name="InvalidTokenError",a(4538);var g=()=>{let[e,t]=(0,n.useState)([]),a=(0,o.C)(e=>e.passwordReducer.value.isSavingToHistory),l=(0,r.I0)();(0,n.useEffect)(()=>{l((0,c.qb)())},[l]);let d=(0,o.C)(e=>e.authReducer.value.token);if(!d)return(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,s.jsx)(p.iT,{visible:!0,height:"80",width:"80",color:"#4fa94d",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})});let u=async()=>{try{var e,a,s;let n=await fetch("https://password-gen-backend-production.up.railway.app/api/password/getHistory",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}});if(!n.ok)throw Error("Failed to fetch passwords");let r=await n.json();t(null!==(s=null==r?void 0:null===(e=r.data[0])||void 0===e?void 0:e.passwordsGenerated)&&void 0!==s?s:[]),console.log("Fetched data:",null==r?void 0:null===(a=r.data[0])||void 0===a?void 0:a.passwordsGenerated)}catch(e){console.error(e)}};(0,n.useEffect)(()=>{u()},[]),(0,n.useEffect)(()=>{a||(u(),console.log(a))},[a]);let h=async a=>{try{let s=await fetch("https://password-gen-backend-production.up.railway.app/api/password/override",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify({passwordForDelete:a})});if(!s.ok)throw Error("Failed to delete password");let n=e.filter(e=>e!==a);t(n)}catch(e){console.error(e)}};return(0,s.jsxs)("div",{className:"password-container dropdown ms-md-5 mt-5 shadow p-3 rounded",children:[(0,s.jsx)("button",{className:"btn btn-sm dropdown- mt-1",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",style:{background:"linear-gradient(135deg, #6e8efb, #a777e3)",borderRadius:"1rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"1.25rem",border:"none"},children:(0,s.jsx)("h5",{children:"Password History"})}),(0,s.jsx)("ul",{className:"dropdown-menu show","aria-labelledby":"dropdownMenuButton1",children:0===e.length?(0,s.jsx)("li",{className:"dropdown-item text-muted",children:"No saved passwords"}):e.map((e,t)=>(0,s.jsxs)("li",{className:"dropdown-item d-flex justify-content-between align-items-center",children:[(0,s.jsx)("span",{onClick:()=>{l((0,i.Zv)(e))},children:e}),(0,s.jsx)("button",{className:"btn d-inline",onClick:t=>{t.stopPropagation(),h(e)},children:"\uD83D\uDDD1ï¸"})]},"".concat(e,"-").concat(t)))})]})},f=()=>{let e=(0,r.I0)(),t=(0,o.C)(e=>e.passwordReducer.value.strengthCheckerInputValue),a=async()=>{await navigator.clipboard.writeText(t),alert("Text copied")};return(0,s.jsxs)("div",{className:"password-container ms-md-5 mt-5 shadow p-3 rounded",children:[(0,s.jsx)("h4",{className:"pb-1",children:"Password Strength Check"}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("span",{className:"password-text",children:(0,s.jsx)("input",{type:"text",value:t,onChange:t=>e((0,i.Zv)(t.target.value))})}),(0,s.jsx)("button",{className:"btn btn-dark clipboard ms-1 mb-1",onClick:a,children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-clipboard mb-1",viewBox:"0 0 16 16",children:[(0,s.jsx)("path",{d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"}),(0,s.jsx)("path",{d:"M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"})]})})]}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l.Z,{password:t})})]})};function v(){let e=(0,h.useRouter)(),[t,a]=(0,n.useState)(null),[l,i]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),x=(0,r.I0)(),b=(0,o.C)(e=>e.authReducer.value.token);(0,n.useEffect)(()=>{let e=async()=>{await x((0,c.qb)()),w(!0)};e()},[x]),(0,n.useEffect)(()=>{try{if(!b&&v||!b)return;let t=function(e,t){let a;if("string"!=typeof e)throw new m("Invalid token specified: must be a string");t||(t={});let s=!0===t.header?0:1,n=e.split(".")[s];if("string"!=typeof n)throw new m(`Invalid token specified: missing part #${s+1}`);try{a=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var a;return a=t,decodeURIComponent(atob(a).replace(/(.)/g,(e,t)=>{let a=t.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}catch(e){return atob(t)}}(n)}catch(e){throw new m(`Invalid token specified: invalid base64 for part #${s+1} (${e.message})`)}try{return JSON.parse(a)}catch(e){throw new m(`Invalid token specified: invalid json for part #${s+1} (${e.message})`)}}(b);if(!t.exp){console.warn("Decoded token doesnt have expiration date! Logging out"),x((0,c.kS)()),e.push("/login");return}let a=1e3*t.exp,s=a-Date.now()-1e4;if(s<=0){x((0,c.kS)()),e.push("/login");return}let n=setTimeout(()=>{x((0,c.kS)()),e.push("/login")},s);return()=>clearTimeout(n)}catch(t){console.error("Failed to decode token",t),x((0,c.kS)()),e.push("/login")}},[b,v]),(0,n.useEffect)(()=>{i(!0);let t=async()=>{try{if(!b||!v)return;let t=await fetch("https://password-gen-backend-production.up.railway.app/api/auth/me",{method:"GET",headers:{Authorization:"Bearer ".concat(b)}});if(!t.ok){e.push("/login");return}let s=await t.json();a(s)}catch(t){console.error("Failed to fetch data",t),e.push("/login")}finally{i(!1)}};t()},[b,v]),(0,n.useEffect)(()=>{!b&&v&&e.push("/login")},[b,v]);let y=b&&t;return l||!y?(0,s.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:(0,s.jsx)(p.iT,{visible:!0,height:"80",width:"80",color:"#4fa94d",ariaLabel:"oval-loading",wrapperStyle:{},wrapperClass:""})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{userData:t}),(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-center flex-column flex-md-row",children:[(0,s.jsx)(d,{}),(0,s.jsxs)("div",{className:"d-flex align-items-center flex-column justify-content-center",children:[(0,s.jsx)(f,{}),(0,s.jsx)(g,{})]})]})]})}},6485:function(e,t,a){"use strict";a.d(t,{kS:function(){return l},qb:function(){return n},x4:function(){return o}});var s=a(64);let n=(0,s.hg)("auth/loadTokenFromStorage",async()=>localStorage.getItem("token")),r=(0,s.oM)({name:"auth",initialState:{value:{token:null}},reducers:{login:(e,t)=>{e.value.token=t.payload,localStorage.setItem("token",t.payload)},logout:e=>{e.value.token=null,localStorage.removeItem("token")}},extraReducers:e=>{e.addCase(n.fulfilled,(e,t)=>{e.value.token=t.payload})}}),{login:o,logout:l}=r.actions;t.ZP=r.reducer},7328:function(e,t,a){"use strict";a.d(t,{AS:function(){return o},H4:function(){return c},Zv:function(){return l},ag:function(){return i}});var s=a(64);let n=(0,s.oM)({name:"password",initialState:{value:{length:0,isSwitched:void 0,isUppercase:void 0,isNumbers:void 0,isSymbols:void 0,result:"",isSavingToHistory:!1,strengthCheckerInputValue:""}},reducers:{changeStrengthCheckerValue:(e,t)=>{e.value.strengthCheckerInputValue=t.payload},setSavingDone:e=>{e.value.isSavingToHistory=!1},setResult:(e,t)=>{e.value.result=t.payload},setSavingToHistory:(e,t)=>{e.value.isSavingToHistory=t.payload},createPassword:(e,t)=>{e.value.isSavingToHistory=!0,e.value.length=t.payload,e.value.result=(()=>{let a="",s="abcdefghijklmnopqrstuvwxyz".concat(e.value.isUppercase?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"").concat(e.value.isSymbols?"!@#$%^&*()<>,.?/[]{}-=_+|/":"").concat(e.value.isNumbers?"0123456789":"","\n        ");for(;a.length<t.payload;)a+=s[Math.floor(Math.random()*s.replaceAll(/\s/g,"").length)];return a})()}}}),{createPassword:r,setSavingDone:o,changeStrengthCheckerValue:l,setResult:i,setSavingToHistory:c}=n.actions;t.ZP=n.reducer},3956:function(e,t,a){"use strict";a.d(t,{C:function(){return i},h:function(){return l}});var s=a(64),n=a(7328),r=a(6485),o=a(3198);let l=(0,s.xC)({reducer:{passwordReducer:n.ZP,authReducer:r.ZP}}),i=o.v9},4538:function(){}},function(e){e.O(0,[571,86,713,662,971,596,744],function(){return e(e.s=4605)}),_N_E=e.O()}]);